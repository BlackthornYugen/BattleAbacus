<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Hazards</title>
</head>
<body>
    <header data-role="header">
        <div data-role="content">
            <a href="index.html" data-prefetch data-transition="slide" data-direction="reverse">
                <img style="width:2.5em" border="0" src="images/h-menu.svg"></a>
            <h1 class="heading">Hazards</h1>
        </div>
    </header>
    <div data-role="controlgroup" data-type="horizontal" id="conditionsOptions"
         name="hazardsOptions" class="btnCenter">
            <a href="#" class="ui-btn-active ui-state-persist" data-theme="c" data-role="button">My Hazards</a>
            <a href="hazards_all.html" data-theme="c" data-role="button">All Hazards</a>
    </div>
    <div id="hazardsListMine" name="hazardsList">
        <ul data-role="listview" data-filter="true" data-inset="true">
            <li data-role="list-divider">Addictions</li>
            <li data-role="list-divider">Curses</li>
            <li data-role="list-divider">Diseases</li>
            <li data-role="list-divider">Poisons</li>
            <li data-role="list-divider">Traps</li>
        </ul>
    </div>
    <script>
        (function () {
            var $hazardList = $("#hazardsListMine > ul");
            $hazardList.find('li[data-role=list-divider]').each(
                function () {
                    var $li = $(this);
                    Hazard.GetRecords(function (hazardArray) {
                        $.each(hazardArray, function (index, hazard) {
                            $("<li>")
                                .append($("<a>")
                                    .attr("href", "#HAZ_" + hazard.id)
                                    .text(hazard.name))
                                .insertAfter($li);
                        });
                        $li.removeClass("ui-screen-hidden")
                        $hazardList.listview('refresh');
                    }, {filter: $li.text().slice(0, -1).replace("addiction", "drug")});
                }
            );
        })();
    </script>
</body>
</html>